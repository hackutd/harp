{
  "version": 3,
  "sources": ["../../supertokens-auth-react/lib/build/translationContext.js"],
  "sourcesContent": ["\"use strict\";\n\nvar utils = require(\"./utils.js\");\nvar jsxRuntime = require(\"react/jsx-runtime\");\nvar React = require(\"react\");\nvar superTokens = require(\"./superTokens.js\");\n\nfunction _interopDefault(e) {\n    return e && e.__esModule ? e : { default: e };\n}\n\nvar React__default = /*#__PURE__*/ _interopDefault(React);\n\nvar errCB = function () {\n    throw new Error(\"Cannot use translation func outside TranslationContext provider.\");\n};\nvar TranslationContext = React__default.default.createContext({\n    translate: errCB,\n});\nvar useTranslation = function () {\n    return React.useContext(TranslationContext).translate;\n};\nvar TranslationContextProvider = function (_a) {\n    var children = _a.children,\n        defaultLanguage = _a.defaultLanguage,\n        userTranslationFunc = _a.userTranslationFunc,\n        defaultStore = _a.defaultStore,\n        translationControlEventSource = _a.translationControlEventSource;\n    var _b = React.useState(defaultStore),\n        translationStore = _b[0],\n        setTranslationStore = _b[1];\n    var _c = React.useState(undefined),\n        currentLanguage = _c[0],\n        setCurrentLanguage = _c[1];\n    React.useEffect(\n        function () {\n            function loadLanguageFromCookies() {\n                return utils.__awaiter(this, void 0, void 0, function () {\n                    var cookieLang, cookieLangTemp;\n                    return utils.__generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                return [4 /*yield*/, superTokens.getCurrentLanguageFromCookie()];\n                            case 1:\n                                cookieLang = _a.sent();\n                                cookieLangTemp = cookieLang === null ? defaultLanguage : cookieLang;\n                                /**\n                                 * If current is not undefined, it means that something else has set the language.\n                                 * For example if the user calls SuperTokens.changeLanguage before this\n                                 *\n                                 * We want to use the language preference from cookies only if something else has\n                                 * not set language before this\n                                 */\n                                setCurrentLanguage(function (current) {\n                                    return current !== undefined ? current : cookieLangTemp;\n                                });\n                                return [2 /*return*/];\n                        }\n                    });\n                });\n            }\n            void loadLanguageFromCookies();\n        },\n        [defaultLanguage, setCurrentLanguage]\n    );\n    React.useEffect(function () {\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var changeHandler = function (_eventName, detail) {\n            setCurrentLanguage(detail);\n        };\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        var loadHandler = function (_eventName, detail) {\n            setTranslationStore(function (os) {\n                return utils.mergeObjects(os, detail);\n            });\n        };\n        translationControlEventSource.on(\"LanguageChange\", changeHandler);\n        translationControlEventSource.on(\"TranslationLoaded\", loadHandler);\n        return function () {\n            translationControlEventSource.off(\"LanguageChange\", changeHandler);\n            translationControlEventSource.off(\"TranslationLoaded\", loadHandler);\n        };\n    });\n    var translateFunc = React.useCallback(\n        function (key) {\n            if (userTranslationFunc !== undefined) {\n                return userTranslationFunc(key);\n            }\n            if (currentLanguage !== undefined) {\n                var res = translationStore[currentLanguage] && translationStore[currentLanguage][key];\n                var fallback = translationStore[defaultLanguage] && translationStore[defaultLanguage][key];\n                if (res === undefined) {\n                    if (fallback !== undefined) {\n                        return fallback;\n                    }\n                    return key;\n                }\n                return res;\n            }\n            throw new Error(\"Should never come here\");\n        },\n        [translationStore, currentLanguage, defaultLanguage, userTranslationFunc]\n    );\n    if (currentLanguage === undefined) {\n        return null;\n    }\n    return jsxRuntime.jsx(\n        TranslationContext.Provider,\n        utils.__assign({ value: { translate: translateFunc } }, { children: children })\n    );\n};\n\nexports.TranslationContextProvider = TranslationContextProvider;\nexports.useTranslation = useTranslation;\n"],
  "mappings": "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",
  "names": ["_a"]
}
