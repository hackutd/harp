{
  "version": 3,
  "sources": ["../../supertokens-web-js/lib/build/recipe/multifactorauth/utils.js", "../../supertokens-web-js/lib/build/recipe/multifactorauth/multiFactorAuthClaim.js", "../../supertokens-web-js/lib/build/recipe/multifactorauth/recipeImplementation.js", "../../supertokens-website/utils/sessionClaimValidatorStore/index.js", "../../supertokens-web-js/lib/build/recipe/multifactorauth/recipe.js", "../../supertokens-web-js/lib/build/recipe/multifactorauth/index.js", "../../supertokens-web-js/recipe/multifactorauth/index.js", "../../supertokens-web-js/lib/build/sessionClaimValidatorStore.js", "../../supertokens-web-js/utils/sessionClaimValidatorStore.js", "../../supertokens-auth-react/lib/build/multifactorauth-shared2.js"],
  "sourcesContent": ["\"use strict\";\nvar __assign =\n    (this && this.__assign) ||\n    function () {\n        __assign =\n            Object.assign ||\n            function (t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.checkFactorRequirement = exports.normaliseUserInput = void 0;\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar utils_1 = require(\"../authRecipe/utils\");\nfunction normaliseUserInput(config) {\n    var override = __assign(\n        {\n            functions: function (originalImplementation) {\n                return originalImplementation;\n            },\n        },\n        config.override\n    );\n    return __assign(__assign({}, (0, utils_1.normaliseAuthRecipe)(config)), { override: override });\n}\nexports.normaliseUserInput = normaliseUserInput;\nfunction checkFactorRequirement(req, completedFactors) {\n    return {\n        id: req,\n        isValid: completedFactors[req] !== undefined,\n        message: \"Not completed\",\n    };\n}\nexports.checkFactorRequirement = checkFactorRequirement;\n", "\"use strict\";\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function (thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function (resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function (resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function (thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function () {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: [],\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function () {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function (v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultiFactorAuthClaimClass = void 0;\nvar utils_1 = require(\"./utils\");\n/**\n * We include \"Class\" in the class name, because it makes it easier to import/use the right thing (the instance exported by the recipe) instead of this.\n * */\nvar MultiFactorAuthClaimClass = /** @class */ (function () {\n    function MultiFactorAuthClaimClass(getRecipeImpl) {\n        var _this = this;\n        this.getRecipeImpl = getRecipeImpl;\n        this.id = \"st-mfa\";\n        this.validators = {\n            hasCompletedMFARequirementsForAuth: function () {\n                return {\n                    id: _this.id,\n                    refresh: function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return _this.refresh.apply(_this, args);\n                    },\n                    shouldRefresh: function (payload, userContext) {\n                        var val = _this.getValueFromPayload(payload, userContext);\n                        return val === undefined;\n                    },\n                    validate: function (payload, userContext) {\n                        return __awaiter(_this, void 0, void 0, function () {\n                            var val;\n                            return __generator(this, function (_a) {\n                                val = this.getValueFromPayload(payload, userContext);\n                                if (val === undefined) {\n                                    return [\n                                        2 /*return*/,\n                                        {\n                                            isValid: false,\n                                            reason: {\n                                                message: \"MFA info not available in payload\",\n                                            },\n                                        },\n                                    ];\n                                }\n                                if (val.v) {\n                                    return [\n                                        2 /*return*/,\n                                        {\n                                            isValid: true,\n                                        },\n                                    ];\n                                }\n                                return [\n                                    2 /*return*/,\n                                    {\n                                        isValid: false,\n                                        reason: {\n                                            message: \"not all required factors have been completed\",\n                                        },\n                                    },\n                                ];\n                            });\n                        });\n                    },\n                };\n            },\n            hasCompletedFactors: function (requirements) {\n                return {\n                    id: _this.id,\n                    shouldRefresh: function (payload, userContext) {\n                        var val = _this.getValueFromPayload(payload, userContext);\n                        return val === undefined;\n                    },\n                    refresh: function () {\n                        var args = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            args[_i] = arguments[_i];\n                        }\n                        return _this.refresh.apply(_this, args);\n                    },\n                    validate: function (payload, userContext) {\n                        var val = _this.getValueFromPayload(payload, userContext);\n                        if (val === undefined) {\n                            return {\n                                isValid: false,\n                                reason: {\n                                    message: \"MFA info not available in payload\",\n                                },\n                            };\n                        }\n                        var completedFactors = val.c;\n                        for (var _i = 0, requirements_1 = requirements; _i < requirements_1.length; _i++) {\n                            var req = requirements_1[_i];\n                            if (typeof req === \"object\" && \"oneOf\" in req) {\n                                var res = req.oneOf\n                                    .map(function (r) {\n                                        return (0, utils_1.checkFactorRequirement)(r, completedFactors);\n                                    })\n                                    .filter(function (v) {\n                                        return v.isValid === false;\n                                    });\n                                if (res.length === req.oneOf.length) {\n                                    return {\n                                        isValid: false,\n                                        reason: {\n                                            message: \"All factor checkers failed in the list\",\n                                            oneOf: req.oneOf,\n                                            failures: res,\n                                        },\n                                    };\n                                }\n                            } else if (typeof req === \"object\" && \"allOfInAnyOrder\" in req) {\n                                var res = req.allOfInAnyOrder\n                                    .map(function (r) {\n                                        return (0, utils_1.checkFactorRequirement)(r, completedFactors);\n                                    })\n                                    .filter(function (v) {\n                                        return v.isValid === false;\n                                    });\n                                if (res.length !== 0) {\n                                    return {\n                                        isValid: false,\n                                        reason: {\n                                            message: \"Some factor checkers failed in the list\",\n                                            allOfInAnyOrder: req.allOfInAnyOrder,\n                                            failures: res,\n                                        },\n                                    };\n                                }\n                            } else {\n                                var res = (0, utils_1.checkFactorRequirement)(req, completedFactors);\n                                if (res.isValid !== true) {\n                                    return {\n                                        isValid: false,\n                                        reason: {\n                                            message: \"Factor validation failed: \" + res.message,\n                                            factorId: res.id,\n                                        },\n                                    };\n                                }\n                            }\n                        }\n                        return {\n                            isValid: true,\n                        };\n                    },\n                };\n            },\n        };\n    }\n    MultiFactorAuthClaimClass.prototype.refresh = function (userContext) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        return [4 /*yield*/, this.getRecipeImpl().resyncSessionAndFetchMFAInfo(userContext)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        });\n    };\n    MultiFactorAuthClaimClass.prototype.getValueFromPayload = function (payload, _userContext) {\n        if (payload[this.id] === undefined) {\n            return undefined;\n        }\n        return {\n            c: payload[this.id].c,\n            v: payload[this.id].v,\n        };\n    };\n    MultiFactorAuthClaimClass.prototype.getLastFetchedTime = function (payload, _userContext) {\n        var _a;\n        return (_a = payload[this.id]) === null || _a === void 0 ? void 0 : _a.t;\n    };\n    return MultiFactorAuthClaimClass;\n})();\nexports.MultiFactorAuthClaimClass = MultiFactorAuthClaimClass;\n", "\"use strict\";\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __assign =\n    (this && this.__assign) ||\n    function () {\n        __assign =\n            Object.assign ||\n            function (t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nvar __awaiter =\n    (this && this.__awaiter) ||\n    function (thisArg, _arguments, P, generator) {\n        function adopt(value) {\n            return value instanceof P\n                ? value\n                : new P(function (resolve) {\n                      resolve(value);\n                  });\n        }\n        return new (P || (P = Promise))(function (resolve, reject) {\n            function fulfilled(value) {\n                try {\n                    step(generator.next(value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function rejected(value) {\n                try {\n                    step(generator[\"throw\"](value));\n                } catch (e) {\n                    reject(e);\n                }\n            }\n            function step(result) {\n                result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n            }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    };\nvar __generator =\n    (this && this.__generator) ||\n    function (thisArg, body) {\n        var _ = {\n                label: 0,\n                sent: function () {\n                    if (t[0] & 1) throw t[1];\n                    return t[1];\n                },\n                trys: [],\n                ops: [],\n            },\n            f,\n            y,\n            t,\n            g;\n        return (\n            (g = { next: verb(0), throw: verb(1), return: verb(2) }),\n            typeof Symbol === \"function\" &&\n                (g[Symbol.iterator] = function () {\n                    return this;\n                }),\n            g\n        );\n        function verb(n) {\n            return function (v) {\n                return step([n, v]);\n            };\n        }\n        function step(op) {\n            if (f) throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (\n                        ((f = 1),\n                        y &&\n                            (t =\n                                op[0] & 2\n                                    ? y[\"return\"]\n                                    : op[0]\n                                    ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0)\n                                    : y.next) &&\n                            !(t = t.call(y, op[1])).done)\n                    )\n                        return t;\n                    if (((y = 0), t)) op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (\n                                !((t = _.trys), (t = t.length > 0 && t[t.length - 1])) &&\n                                (op[0] === 6 || op[0] === 2)\n                            ) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2]) _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                } catch (e) {\n                    op = [6, e];\n                    y = 0;\n                } finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5) throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getRecipeImplementation = void 0;\nvar querier_1 = require(\"../../querier\");\nfunction getRecipeImplementation(recipeImplInput) {\n    var querier = new querier_1.default(recipeImplInput.recipeId, recipeImplInput.appInfo);\n    return {\n        resyncSessionAndFetchMFAInfo: function (_a) {\n            var options = _a.options,\n                userContext = _a.userContext;\n            return __awaiter(this, void 0, void 0, function () {\n                var _b, jsonBody, fetchResponse;\n                return __generator(this, function (_c) {\n                    switch (_c.label) {\n                        case 0:\n                            return [\n                                4 /*yield*/,\n                                querier.put(\n                                    \"/mfa/info\",\n                                    {},\n                                    querier_1.default.preparePreAPIHook({\n                                        recipePreAPIHook: recipeImplInput.preAPIHook,\n                                        action: \"GET_MFA_INFO\",\n                                        options: options,\n                                        userContext: userContext,\n                                    }),\n                                    querier_1.default.preparePostAPIHook({\n                                        recipePostAPIHook: recipeImplInput.postAPIHook,\n                                        action: \"GET_MFA_INFO\",\n                                        userContext: userContext,\n                                    })\n                                ),\n                            ];\n                        case 1:\n                            (_b = _c.sent()), (jsonBody = _b.jsonBody), (fetchResponse = _b.fetchResponse);\n                            return [2 /*return*/, __assign(__assign({}, jsonBody), { fetchResponse: fetchResponse })];\n                    }\n                });\n            });\n        },\n    };\n}\nexports.default = getRecipeImplementation;\nexports.getRecipeImplementation = getRecipeImplementation;\n", "/* Copyright (c) 2020, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n * \n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n * \n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License. \n*/\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\nlet d = require(\"../../lib/build/utils/sessionClaimValidatorStore\");\nif (d.default !== undefined) {\n    __export(d);\n} else {\n    __export({\n        default: d,\n        ...d,\n    });\n}", "\"use strict\";\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar __extends =\n    (this && this.__extends) ||\n    (function () {\n        var extendStatics = function (d, b) {\n            extendStatics =\n                Object.setPrototypeOf ||\n                ({ __proto__: [] } instanceof Array &&\n                    function (d, b) {\n                        d.__proto__ = b;\n                    }) ||\n                function (d, b) {\n                    for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n                };\n            return extendStatics(d, b);\n        };\n        return function (d, b) {\n            if (typeof b !== \"function\" && b !== null)\n                throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n            extendStatics(d, b);\n            function __() {\n                this.constructor = d;\n            }\n            d.prototype = b === null ? Object.create(b) : ((__.prototype = b.prototype), new __());\n        };\n    })();\nvar __assign =\n    (this && this.__assign) ||\n    function () {\n        __assign =\n            Object.assign ||\n            function (t) {\n                for (var s, i = 1, n = arguments.length; i < n; i++) {\n                    s = arguments[i];\n                    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n                }\n                return t;\n            };\n        return __assign.apply(this, arguments);\n    };\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Recipe = void 0;\nvar utils_1 = require(\"./utils\");\nvar supertokens_js_override_1 = require(\"supertokens-js-override\");\nvar recipeImplementation_1 = require(\"./recipeImplementation\");\nvar utils_2 = require(\"../../utils\");\nvar authRecipe_1 = require(\"../authRecipe\");\nvar postSuperTokensInitCallbacks_1 = require(\"../../postSuperTokensInitCallbacks\");\nvar sessionClaimValidatorStore_1 = require(\"supertokens-website/utils/sessionClaimValidatorStore\");\nvar multiFactorAuthClaim_1 = require(\"./multiFactorAuthClaim\");\nvar Recipe = /** @class */ (function (_super) {\n    __extends(Recipe, _super);\n    function Recipe(config) {\n        var _this = _super.call(this, (0, utils_1.normaliseUserInput)(config)) || this;\n        var builder = new supertokens_js_override_1.default(\n            (0, recipeImplementation_1.default)({\n                recipeId: _this.config.recipeId,\n                appInfo: _this.config.appInfo,\n                clientType: _this.config.clientType,\n                preAPIHook: _this.config.preAPIHook,\n                postAPIHook: _this.config.postAPIHook,\n            })\n        );\n        _this.recipeImplementation = builder.override(_this.config.override.functions).build();\n        postSuperTokensInitCallbacks_1.PostSuperTokensInitCallbacks.addPostInitCallback(function () {\n            sessionClaimValidatorStore_1.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(\n                Recipe.MultiFactorAuthClaim.validators.hasCompletedMFARequirementsForAuth()\n            );\n        });\n        return _this;\n    }\n    Recipe.init = function (config) {\n        return function (appInfo, clientType, _enableDebugLogs, overrideMaps) {\n            Recipe.instance = new Recipe(\n                __assign(\n                    __assign(\n                        {},\n                        (0, utils_2.applyPlugins)(\n                            Recipe.RECIPE_ID,\n                            config,\n                            overrideMaps !== null && overrideMaps !== void 0 ? overrideMaps : []\n                        )\n                    ),\n                    { recipeId: Recipe.RECIPE_ID, appInfo: appInfo, clientType: clientType }\n                )\n            );\n            return Recipe.instance;\n        };\n    };\n    Recipe.getInstanceOrThrow = function () {\n        if (Recipe.instance === undefined) {\n            var error = \"No instance of MultiFactorAuth found. Make sure to call the MultiFactorAuth.init method.\";\n            error = (0, utils_2.checkForSSRErrorAndAppendIfNeeded)(error);\n            throw Error(error);\n        }\n        return Recipe.instance;\n    };\n    Recipe.reset = function () {\n        if (!(0, utils_2.isTest)()) {\n            return;\n        }\n        Recipe.instance = undefined;\n        return;\n    };\n    Recipe.RECIPE_ID = \"multifactorauth\";\n    Recipe.MultiFactorAuthClaim = new multiFactorAuthClaim_1.MultiFactorAuthClaimClass(function () {\n        return Recipe.getInstanceOrThrow().recipeImplementation;\n    });\n    return Recipe;\n})(authRecipe_1.default);\nexports.Recipe = Recipe;\nexports.default = Recipe;\n", "\"use strict\";\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MultiFactorAuthClaimClass =\n    exports.MultiFactorAuthClaim =\n    exports.resyncSessionAndFetchMFAInfo =\n    exports.init =\n        void 0;\nvar multiFactorAuthClaim_1 = require(\"./multiFactorAuthClaim\");\nObject.defineProperty(exports, \"MultiFactorAuthClaimClass\", {\n    enumerable: true,\n    get: function () {\n        return multiFactorAuthClaim_1.MultiFactorAuthClaimClass;\n    },\n});\nvar recipe_1 = require(\"./recipe\");\nvar utils_1 = require(\"../../utils\");\nvar RecipeWrapper = /** @class */ (function () {\n    function RecipeWrapper() {}\n    RecipeWrapper.init = function (config) {\n        return recipe_1.default.init(config);\n    };\n    /**\n     * Loads information about what factors the current session can set up/complete and updates the requirements in the session payload\n     *\n     * @param userContext (OPTIONAL) Refer to {@link https://supertokens.com/docs/emailpassword/advanced-customizations/user-context the documentation}\n     *\n     * @param options (OPTIONAL) Use this to configure additional properties (for example pre api hooks)\n     *\n     * @returns `{ status: \"OK\", ...}` if successful\n     */\n    RecipeWrapper.resyncSessionAndFetchMFAInfo = function (input) {\n        var _a;\n        return recipe_1.default.getInstanceOrThrow().recipeImplementation.resyncSessionAndFetchMFAInfo({\n            options:\n                (_a = input === null || input === void 0 ? void 0 : input.options) !== null && _a !== void 0 ? _a : {},\n            userContext: (0, utils_1.getNormalisedUserContext)(\n                input === null || input === void 0 ? void 0 : input.userContext\n            ),\n        });\n    };\n    RecipeWrapper.MultiFactorAuthClaim = recipe_1.default.MultiFactorAuthClaim;\n    return RecipeWrapper;\n})();\nexports.default = RecipeWrapper;\nvar init = RecipeWrapper.init;\nexports.init = init;\nvar resyncSessionAndFetchMFAInfo = RecipeWrapper.resyncSessionAndFetchMFAInfo;\nexports.resyncSessionAndFetchMFAInfo = resyncSessionAndFetchMFAInfo;\nvar MultiFactorAuthClaim = RecipeWrapper.MultiFactorAuthClaim;\nexports.MultiFactorAuthClaim = MultiFactorAuthClaim;\n", "/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\n__export(require(\"../../lib/build/recipe/multifactorauth\"));\n", "\"use strict\";\n/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.SessionClaimValidatorStore = void 0;\nvar sessionClaimValidatorStore_1 = require(\"supertokens-website/utils/sessionClaimValidatorStore\");\nObject.defineProperty(exports, \"SessionClaimValidatorStore\", {\n    enumerable: true,\n    get: function () {\n        return sessionClaimValidatorStore_1.SessionClaimValidatorStore;\n    },\n});\n", "/* Copyright (c) 2022, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\n\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nexports.__esModule = true;\n\nlet d = require(\"../lib/build/sessionClaimValidatorStore\");\n\nif (d.default !== undefined) {\n    __export(d);\n} else {\n    __export({\n        default: d,\n        ...d,\n    });\n}\n", "\"use strict\";\n\nvar utils = require(\"./utils.js\");\nvar MultiFactorAuthWebJS = require(\"supertokens-web-js/recipe/multifactorauth\");\nvar utils$1 = require(\"supertokens-web-js/utils\");\nvar postSuperTokensInitCallbacks = require(\"supertokens-web-js/utils/postSuperTokensInitCallbacks\");\nvar sessionClaimValidatorStore = require(\"supertokens-web-js/utils/sessionClaimValidatorStore\");\nvar windowHandler = require(\"supertokens-web-js/utils/windowHandler\");\nvar superTokens = require(\"./superTokens.js\");\nvar index = require(\"./recipeModule-shared.js\");\nvar types = require(\"./multifactorauth-shared.js\");\n\nfunction _interopDefault(e) {\n    return e && e.__esModule ? e : { default: e };\n}\n\nvar MultiFactorAuthWebJS__default = /*#__PURE__*/ _interopDefault(MultiFactorAuthWebJS);\n\n/* Copyright (c) 2024, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar DEFAULT_FACTOR_CHOOSER_PATH = \"/mfa\";\nvar MFA_INFO_CACHE_KEY = \"st-mfa-info-cache\";\n\n// This is a simple in-memory lock using a promise\n// We do not need anything more complex than this, since the cache we are locking is in sessionStorage anyway.\nvar lockProm = undefined;\nvar getFunctionOverrides = function (\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _onHandleEvent\n) {\n    return function (originalImp) {\n        return utils.__assign(utils.__assign({}, originalImp), {\n            resyncSessionAndFetchMFAInfo: function (input) {\n                return utils.__awaiter(this, void 0, void 0, function () {\n                    var stWindow, stored, parsed, unlock, stored_1, parsed, val;\n                    return utils.__generator(this, function (_a) {\n                        switch (_a.label) {\n                            case 0:\n                                stWindow = windowHandler.WindowHandlerReference.getReferenceOrThrow();\n                                // If someone is refreshing from the server we wait for it to finish.\n                                return [4 /*yield*/, lockProm];\n                            case 1:\n                                // If someone is refreshing from the server we wait for it to finish.\n                                _a.sent();\n                                return [4 /*yield*/, stWindow.windowHandler.sessionStorage.getItem(MFA_INFO_CACHE_KEY)];\n                            case 2:\n                                stored = _a.sent();\n                                if (stored !== null) {\n                                    parsed = JSON.parse(stored);\n                                    if (parsed.t > Date.now() - 1000) {\n                                        return [\n                                            2 /*return*/,\n                                            utils.__assign(utils.__assign({}, parsed.v), {\n                                                // Adding a fake response is not great, but we do want to add something and this way it's detectable by the app\n                                                // so they could even add specific handling for it if they preferred.\n                                                fetchResponse: new Response(null, { status: 304 }),\n                                            }),\n                                        ];\n                                    }\n                                }\n                                _a.label = 3;\n                            case 3:\n                                if (!(lockProm !== undefined)) return [3 /*break*/, 5];\n                                return [4 /*yield*/, lockProm];\n                            case 4:\n                                _a.sent();\n                                return [3 /*break*/, 3];\n                            case 5:\n                                lockProm = new Promise(function (res) {\n                                    return (unlock = res);\n                                });\n                                _a.label = 6;\n                            case 6:\n                                _a.trys.push([6, , 11, 12]);\n                                return [4 /*yield*/, stWindow.windowHandler.sessionStorage.getItem(MFA_INFO_CACHE_KEY)];\n                            case 7:\n                                stored_1 = _a.sent();\n                                if (stored_1 !== null) {\n                                    parsed = JSON.parse(stored_1);\n                                    if (parsed.t > Date.now() - 1000) {\n                                        return [\n                                            2 /*return*/,\n                                            utils.__assign(utils.__assign({}, parsed.v), {\n                                                // Adding a fake response is not great, but we do want to add something and this way it's detectable by the app\n                                                // so they could even add specific handling for it if they preferred.\n                                                fetchResponse: new Response(null, { status: 304 }),\n                                            }),\n                                        ];\n                                    }\n                                }\n                                return [4 /*yield*/, originalImp.resyncSessionAndFetchMFAInfo(input)];\n                            case 8:\n                                val = _a.sent();\n                                if (!(val.status === \"OK\")) return [3 /*break*/, 10];\n                                // We are not storing the fetchResponse\n                                return [\n                                    4 /*yield*/,\n                                    stWindow.windowHandler.sessionStorage.setItem(\n                                        MFA_INFO_CACHE_KEY,\n                                        JSON.stringify({\n                                            t: Date.now(),\n                                            v: {\n                                                emails: val.emails,\n                                                phoneNumbers: val.phoneNumbers,\n                                                factors: val.factors,\n                                                status: val.status,\n                                            },\n                                        })\n                                    ),\n                                ];\n                            case 9:\n                                // We are not storing the fetchResponse\n                                _a.sent();\n                                _a.label = 10;\n                            case 10:\n                                return [2 /*return*/, val];\n                            case 11:\n                                // Release the lock\n                                lockProm = undefined;\n                                unlock();\n                                return [7 /*endfinally*/];\n                            case 12:\n                                return [2 /*return*/];\n                        }\n                    });\n                });\n            },\n        });\n    };\n};\n\nvar MultiFactorAuthClaimClass = /** @class */ (function () {\n    function MultiFactorAuthClaimClass(getRecipe, getRedirectURL, onFailureRedirection) {\n        var _this = this;\n        this.webJSClaim = new MultiFactorAuthWebJS.MultiFactorAuthClaimClass(function () {\n            return getRecipe().webJSRecipe;\n        });\n        this.refresh = this.webJSClaim.refresh;\n        this.getLastFetchedTime = this.webJSClaim.getLastFetchedTime;\n        this.getValueFromPayload = this.webJSClaim.getValueFromPayload;\n        this.id = this.webJSClaim.id;\n        var defaultOnFailureRedirection = function (_a) {\n            var reason = _a.reason,\n                userContext = _a.userContext;\n            return utils.__awaiter(_this, void 0, void 0, function () {\n                var recipe, nextFactorOptions, availableFactors, mfaInfo_1, availableFactors;\n                return utils.__generator(this, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            recipe = getRecipe();\n                            nextFactorOptions =\n                                reason.oneOf ||\n                                reason.allOfInAnyOrder ||\n                                (reason.factorId !== undefined ? [reason.factorId] : undefined);\n                            if (!(nextFactorOptions !== undefined)) return [3 /*break*/, 1];\n                            utils.logDebugMessage(\n                                \"Redirecting to MFA on next array from validation failure: \" +\n                                    nextFactorOptions.join(\", \")\n                            );\n                            availableFactors = recipe\n                                .getSecondaryFactors(userContext)\n                                .filter(function (v) {\n                                    return nextFactorOptions.factors.next.includes(v.id);\n                                })\n                                .map(function (v) {\n                                    return v.id;\n                                });\n                            // In this case we got here from a validator that defined the list of validators\n                            if (availableFactors.length === 1) {\n                                return [\n                                    2 /*return*/,\n                                    getRedirectURL(\n                                        { action: \"GO_TO_FACTOR\", factorId: availableFactors[0] },\n                                        userContext\n                                    ),\n                                ];\n                            } else {\n                                return [\n                                    2 /*return*/,\n                                    getRedirectURL(\n                                        { action: \"FACTOR_CHOOSER\", nextFactorOptions: nextFactorOptions },\n                                        userContext\n                                    ),\n                                ];\n                            }\n                        case 1:\n                            return [\n                                4 /*yield*/,\n                                recipe.webJSRecipe.resyncSessionAndFetchMFAInfo({ userContext: userContext }),\n                            ];\n                        case 2:\n                            mfaInfo_1 = _b.sent();\n                            availableFactors = recipe\n                                .getSecondaryFactors(userContext)\n                                .filter(function (v) {\n                                    return mfaInfo_1.factors.next.includes(v.id);\n                                })\n                                .map(function (v) {\n                                    return v.id;\n                                });\n                            utils.logDebugMessage(\n                                \"Redirecting to MFA on next array from backend: \" + availableFactors.join(\", \")\n                            );\n                            if (availableFactors.length === 1) {\n                                return [\n                                    2 /*return*/,\n                                    getRedirectURL(\n                                        { action: \"GO_TO_FACTOR\", factorId: availableFactors[0] },\n                                        userContext\n                                    ),\n                                ];\n                            } else {\n                                return [2 /*return*/, getRedirectURL({ action: \"FACTOR_CHOOSER\" }, userContext)];\n                            }\n                        case 3:\n                            // If this happens the user can't complete sign-in (the claim validator fails, but there is no valid next factor for us)\n                            // Returning undefined here will make SessionAuth render an access denied screen.\n                            return [2 /*return*/, undefined];\n                    }\n                });\n            });\n        };\n        this.validators = utils.__assign(utils.__assign({}, this.webJSClaim.validators), {\n            hasCompletedMFARequirementsForAuth: function (doRedirection, showAccessDeniedOnFailure) {\n                if (doRedirection === void 0) {\n                    doRedirection = true;\n                }\n                if (showAccessDeniedOnFailure === void 0) {\n                    showAccessDeniedOnFailure = true;\n                }\n                var orig = _this.webJSClaim.validators.hasCompletedMFARequirementsForAuth();\n                return utils.__assign(utils.__assign({}, orig), {\n                    showAccessDeniedOnFailure: showAccessDeniedOnFailure,\n                    onFailureRedirection:\n                        onFailureRedirection !== null && onFailureRedirection !== void 0\n                            ? onFailureRedirection\n                            : function (_a) {\n                                  var reason = _a.reason,\n                                      userContext = _a.userContext;\n                                  return doRedirection\n                                      ? defaultOnFailureRedirection({ reason: reason, userContext: userContext })\n                                      : undefined;\n                              },\n                });\n            },\n            hasCompletedFactors: function (requirements, doRedirection, showAccessDeniedOnFailure) {\n                if (doRedirection === void 0) {\n                    doRedirection = true;\n                }\n                if (showAccessDeniedOnFailure === void 0) {\n                    showAccessDeniedOnFailure = true;\n                }\n                var orig = _this.webJSClaim.validators.hasCompletedFactors(requirements);\n                return utils.__assign(utils.__assign({}, orig), {\n                    showAccessDeniedOnFailure: showAccessDeniedOnFailure,\n                    onFailureRedirection:\n                        onFailureRedirection !== null && onFailureRedirection !== void 0\n                            ? onFailureRedirection\n                            : function (_a) {\n                                  var reason = _a.reason,\n                                      userContext = _a.userContext;\n                                  return doRedirection\n                                      ? defaultOnFailureRedirection({ reason: reason, userContext: userContext })\n                                      : undefined;\n                              },\n                });\n            },\n        });\n    }\n    return MultiFactorAuthClaimClass;\n})();\n\n/* Copyright (c) 2024, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nfunction normaliseMultiFactorAuthFeature(config) {\n    var _a;\n    if (config === undefined) {\n        config = {};\n    }\n    var disableDefaultUI = config.disableDefaultUI === true;\n    var override = utils.__assign(\n        {\n            functions: function (originalImplementation) {\n                return originalImplementation;\n            },\n        },\n        config.override\n    );\n    return utils.__assign(utils.__assign({}, superTokens.normaliseRecipeModuleConfig(config)), {\n        disableDefaultUI: disableDefaultUI,\n        firstFactors: config === null || config === void 0 ? void 0 : config.firstFactors,\n        getSecondaryFactorInfo: function (orig) {\n            return orig;\n        },\n        factorChooserScreen: (_a = config.factorChooserScreen) !== null && _a !== void 0 ? _a : {},\n        override: override,\n    });\n}\nfunction getAvailableFactors(factors, nextArrayQueryParam, recipe, userContext) {\n    utils.logDebugMessage(\"getAvailableFactors: allowed to setup: \".concat(factors.allowedToSetup));\n    utils.logDebugMessage(\"getAvailableFactors: already setup: \".concat(factors.alreadySetup));\n    utils.logDebugMessage(\"getAvailableFactors: next from factorInfo: \".concat(factors.next));\n    utils.logDebugMessage(\"getAvailableFactors: nextArrayQueryParam: \".concat(nextArrayQueryParam));\n    utils.logDebugMessage(\n        \"getAvailableFactors: secondary factors: \".concat(\n            recipe.getSecondaryFactors(userContext).map(function (f) {\n                return f.id;\n            })\n        )\n    );\n    // There are 3 cases here:\n    // 1. The app provided an array of factors to show (nextArrayQueryParam) -> we show whatever is in the array\n    // 2. no app provided list and validator passed -> we show all factors available to set up or complete\n    // 3. no app provided list and validator failing -> we show whatever the BE tells us to (this is already filtered by allowedToSetup&alreadySetup on the BE)\n    var nextArr = nextArrayQueryParam !== undefined ? nextArrayQueryParam.split(\",\") : factors.next;\n    var availableFactors = recipe.getSecondaryFactors(userContext).filter(function (_a) {\n        var id = _a.id;\n        return nextArr.length === 0\n            ? factors.allowedToSetup.includes(id) || factors.alreadySetup.includes(id)\n            : nextArr.includes(id);\n    });\n    return availableFactors;\n}\n\n/* Copyright (c) 2024, VRAI Labs and/or its affiliates. All rights reserved.\n *\n * This software is licensed under the Apache License, Version 2.0 (the\n * \"License\") as published by the Apache Software Foundation.\n *\n * You may not use this file except in compliance with the License. You may\n * obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the\n * License for the specific language governing permissions and limitations\n * under the License.\n */\nvar MultiFactorAuth = /** @class */ (function (_super) {\n    utils.__extends(MultiFactorAuth, _super);\n    function MultiFactorAuth(config, webJSRecipe) {\n        if (webJSRecipe === void 0) {\n            webJSRecipe = MultiFactorAuthWebJS__default.default;\n        }\n        var _this = _super.call(this, config) || this;\n        _this.webJSRecipe = webJSRecipe;\n        _this.recipeID = MultiFactorAuth.RECIPE_ID;\n        _this.secondaryFactors = [];\n        _this.getDefaultRedirectionURL = function (context, userContext) {\n            return utils.__awaiter(_this, void 0, void 0, function () {\n                var nParam, redirectInfo;\n                return utils.__generator(this, function (_b) {\n                    if (context.action === \"FACTOR_CHOOSER\") {\n                        nParam =\n                            context.nextFactorOptions && context.nextFactorOptions.length > 0\n                                ? context.nextFactorOptions.join(\",\")\n                                : undefined;\n                        return [\n                            2 /*return*/,\n                            utils.getDefaultRedirectionURLForPath(this.config, DEFAULT_FACTOR_CHOOSER_PATH, context, {\n                                n: nParam,\n                                stepUp: context.stepUp ? \"true\" : undefined,\n                            }),\n                        ];\n                    } else if (context.action === \"GO_TO_FACTOR\") {\n                        redirectInfo = this.getSecondaryFactors(userContext).find(function (f) {\n                            return f.id === context.factorId;\n                        });\n                        if (redirectInfo !== undefined) {\n                            return [\n                                2 /*return*/,\n                                utils.getDefaultRedirectionURLForPath(this.config, redirectInfo.path, context, {\n                                    setup: context.forceSetup ? \"true\" : undefined,\n                                    stepUp: context.stepUp ? \"true\" : undefined,\n                                }),\n                            ];\n                        }\n                        throw new Error(\"Requested redirect to unknown factor id: \" + context.factorId);\n                    } else {\n                        return [2 /*return*/, \"/\"];\n                    }\n                });\n            });\n        };\n        postSuperTokensInitCallbacks.PostSuperTokensInitCallbacks.addPostInitCallback(function () {\n            var defaultFactorsValidator =\n                MultiFactorAuth.MultiFactorAuthClaim.validators.hasCompletedMFARequirementsForAuth();\n            sessionClaimValidatorStore.SessionClaimValidatorStore.addClaimValidatorFromOtherRecipe(\n                defaultFactorsValidator\n            );\n            types.Session.getInstanceOrThrow().addEventListener(function () {\n                // We clear the cache if the session updated, since that may mean that the MFA info has changed\n                var stWindow = windowHandler.WindowHandlerReference.getReferenceOrThrow();\n                stWindow.windowHandler.sessionStorage.removeItemSync(MFA_INFO_CACHE_KEY);\n            });\n        });\n        return _this;\n    }\n    MultiFactorAuth.init = function (config) {\n        var normalisedConfig = normaliseMultiFactorAuthFeature(config);\n        return {\n            recipeID: MultiFactorAuth.RECIPE_ID,\n            authReact: function (appInfo) {\n                MultiFactorAuth.instance = new MultiFactorAuth(\n                    utils.__assign(utils.__assign({}, normalisedConfig), {\n                        appInfo: appInfo,\n                        recipeId: MultiFactorAuth.RECIPE_ID,\n                    })\n                );\n                return MultiFactorAuth.instance;\n            },\n            webJS: MultiFactorAuthWebJS__default.default.init(\n                utils.__assign(utils.__assign({}, normalisedConfig), {\n                    override: {\n                        functions: function (originalImpl, builder) {\n                            var functions = getFunctionOverrides(normalisedConfig.onHandleEvent);\n                            builder.override(functions);\n                            builder.override(normalisedConfig.override.functions);\n                            return originalImpl;\n                        },\n                    },\n                })\n            ),\n        };\n    };\n    MultiFactorAuth.getInstance = function () {\n        return MultiFactorAuth.instance;\n    };\n    MultiFactorAuth.getInstanceOrThrow = function () {\n        if (MultiFactorAuth.instance === undefined) {\n            var error = \"No instance of MultiFactorAuth found. Make sure to call the MultiFactorAuth.init method.\";\n            // eslint-disable-next-line supertokens-auth-react/no-direct-window-object\n            if (typeof window === \"undefined\") {\n                error = error + utils.SSR_ERROR;\n            }\n            throw Error(error);\n        }\n        return MultiFactorAuth.instance;\n    };\n    MultiFactorAuth.prototype.addMFAFactors = function (secondaryFactors) {\n        this.secondaryFactors = utils.__spreadArray(\n            utils.__spreadArray(\n                [],\n                this.secondaryFactors.filter(function (factor) {\n                    return secondaryFactors.every(function (newFactor) {\n                        return factor.id !== newFactor.id;\n                    });\n                }),\n                true\n            ),\n            secondaryFactors,\n            true\n        );\n    };\n    MultiFactorAuth.prototype.isFirstFactorEnabledOnClient = function (factorId) {\n        return this.config.firstFactors === undefined || this.config.firstFactors.includes(factorId);\n    };\n    MultiFactorAuth.prototype.getSecondaryFactors = function (userContext) {\n        return this.config.getSecondaryFactorInfo(this.secondaryFactors, userContext);\n    };\n    MultiFactorAuth.prototype.redirectToFactor = function (_b) {\n        var factorId = _b.factorId,\n            forceSetup = _b.forceSetup,\n            stepUp = _b.stepUp,\n            redirectBack = _b.redirectBack,\n            navigate = _b.navigate,\n            userContext = _b.userContext;\n        return utils.__awaiter(this, void 0, void 0, function () {\n            var url, redirectUrl, redirectUrl;\n            return utils.__generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        return [\n                            4 /*yield*/,\n                            this.getRedirectUrl(\n                                {\n                                    action: \"GO_TO_FACTOR\",\n                                    forceSetup: forceSetup,\n                                    stepUp: stepUp,\n                                    factorId: factorId,\n                                    tenantIdFromQueryParams: utils.getTenantIdFromQueryParams(),\n                                },\n                                utils$1.getNormalisedUserContext(userContext)\n                            ),\n                        ];\n                    case 1:\n                        url = _c.sent();\n                        if (url === null) {\n                            return [2 /*return*/];\n                        }\n                        // If redirectBack was set to true we always set redirectToPath to that value\n                        // otherwise we try and get it from the query params, finally falling back to not setting it.\n                        // Example:\n                        // 1. If the app calls this on pathX and with redirectBack=false, we redirect to /auth/mfa/factor-id\n                        // 2. If the app calls this on pathX and with redirectBack=true, we redirect to /auth/mfa/factor-id?redirectToPath=pathX\n                        // 3. If:\n                        //      - the app redirects to the factor chooser with redirectBack=true from path=X, they end up on /auth/mfa?redirectToPath=pathX\n                        //      - the factor chooser screen then calls this with redirectBack=false, then they end up on /auth/mfa/factor-id?redirectToPath=pathX\n                        // 4. In the unlikely case that the app itself uses a `redirectToPath` query param internally\n                        //    and is on a custom path that has a redirectToPath set to pathX when calling this function,\n                        //    then we keep that in the query params if redirectBack is set to false.\n                        if (redirectBack) {\n                            redirectUrl = utils.getCurrentNormalisedUrlPathWithQueryParamsAndFragments();\n                            url = utils.appendQueryParamsToURL(url, { redirectToPath: redirectUrl });\n                        } else {\n                            redirectUrl = utils.getRedirectToPathFromURL();\n                            if (redirectUrl) {\n                                url = utils.appendQueryParamsToURL(url, { redirectToPath: redirectUrl });\n                            }\n                        }\n                        return [\n                            2 /*return*/,\n                            superTokens.SuperTokens.getInstanceOrThrow().redirectToUrl(url, navigate),\n                        ];\n                }\n            });\n        });\n    };\n    MultiFactorAuth.prototype.redirectToFactorChooser = function (_b) {\n        var _c = _b.redirectBack,\n            redirectBack = _c === void 0 ? false : _c,\n            _d = _b.nextFactorOptions,\n            nextFactorOptions = _d === void 0 ? [] : _d,\n            stepUp = _b.stepUp,\n            navigate = _b.navigate,\n            userContext = _b.userContext;\n        return utils.__awaiter(this, void 0, void 0, function () {\n            var url, redirectUrl, redirectUrl;\n            return utils.__generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        return [\n                            4 /*yield*/,\n                            this.getRedirectUrl(\n                                {\n                                    action: \"FACTOR_CHOOSER\",\n                                    nextFactorOptions: nextFactorOptions,\n                                    stepUp: stepUp,\n                                    tenantIdFromQueryParams: utils.getTenantIdFromQueryParams(),\n                                },\n                                utils$1.getNormalisedUserContext(userContext)\n                            ),\n                        ];\n                    case 1:\n                        url = _e.sent();\n                        if (url === null) {\n                            return [2 /*return*/];\n                        }\n                        if (redirectBack) {\n                            redirectUrl = utils.getCurrentNormalisedUrlPathWithQueryParamsAndFragments();\n                            url = utils.appendQueryParamsToURL(url, { redirectToPath: redirectUrl });\n                        } else {\n                            redirectUrl = utils.getRedirectToPathFromURL();\n                            if (redirectUrl) {\n                                url = utils.appendQueryParamsToURL(url, { redirectToPath: redirectUrl });\n                            }\n                        }\n                        return [\n                            2 /*return*/,\n                            superTokens.SuperTokens.getInstanceOrThrow().redirectToUrl(url, navigate),\n                        ];\n                }\n            });\n        });\n    };\n    /*\n     * Tests methods.\n     */\n    MultiFactorAuth.reset = function () {\n        if (!utils.isTest()) {\n            return;\n        }\n        MultiFactorAuth.instance = undefined;\n        return;\n    };\n    var _a;\n    _a = MultiFactorAuth;\n    MultiFactorAuth.RECIPE_ID = \"multifactorauth\";\n    MultiFactorAuth.MultiFactorAuthClaim = new MultiFactorAuthClaimClass(\n        function () {\n            return MultiFactorAuth.getInstanceOrThrow();\n        },\n        function (context, userContext) {\n            return utils.__awaiter(void 0, void 0, void 0, function () {\n                return utils.__generator(_a, function (_b) {\n                    switch (_b.label) {\n                        case 0:\n                            return [\n                                4 /*yield*/,\n                                this.getInstanceOrThrow().getRedirectUrl(\n                                    utils.__assign(utils.__assign({}, context), {\n                                        tenantIdFromQueryParams: utils.getTenantIdFromQueryParams(),\n                                    }),\n                                    userContext\n                                ),\n                            ];\n                        case 1:\n                            return [2 /*return*/, _b.sent() || undefined];\n                    }\n                });\n            });\n        }\n    );\n    return MultiFactorAuth;\n})(index.RecipeModule);\n\nexports.DEFAULT_FACTOR_CHOOSER_PATH = DEFAULT_FACTOR_CHOOSER_PATH;\nexports.MultiFactorAuth = MultiFactorAuth;\nexports.getAvailableFactors = getAvailableFactors;\n"],
  "mappings": "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",
  "names": ["require_utils", "MultiFactorAuthClaimClass", "require_sessionClaimValidatorStore", "d", "b", "Recipe", "RecipeWrapper", "require_multifactorauth", "require_sessionClaimValidatorStore", "require_sessionClaimValidatorStore", "MultiFactorAuthClaimClass", "MultiFactorAuth"]
}
